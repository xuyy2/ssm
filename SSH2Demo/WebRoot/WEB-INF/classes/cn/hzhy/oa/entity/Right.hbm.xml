<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
  <class name="cn.hzhy.oa.entity.Right" table="rights" schema="hzhy">
    <!-- 配置对象标识符和数据库表主键之间的映射关系 -->
    <id name="rightId" column="right_id" type="java.lang.Integer">
      <!-- 主键生成策略 -->
      <generator class="sequence">
        <param name="sequence">seq_rights</param>
      </generator>
    </id>
    <property name="rightName" column="right_name" type="java.lang.String"></property>
    <property name="rightDesc" column="right_desc" type="java.lang.String"></property>
    <property name="rightUrl" column="right_url" type="java.lang.String"></property>
    <property name="rightType" column="right_type" type="java.lang.Integer"></property>
    <property name="status" column="status" type="java.lang.Integer"></property>  
    
    <!-- 配置和父权限的多对一映射 -->
    <many-to-one name="parent" column="parent_id" class="cn.hzhy.oa.entity.Right"></many-to-one>
    
    <!-- 配置和子权限的一对多关联 -->
    <set name="children" inverse="true" cascade="save-update">
      <!-- 配置外键 -->
      <key column="parent_id"></key>
      <one-to-many class="cn.hzhy.oa.entity.Right" />
    </set>
    
    <!-- 配置权限到角色的多对多关联 -->
    <set name="roles" table="REF_ROLES_RIGHTS" cascade="save-update">	<!-- 配置关联表 -->
      <!-- 配置关联到自身的外键 -->
      <key column="ref_right_id"></key>  
      <!-- 配置关联对象的类型以及关联表中对应关联对象的外键 -->
      <many-to-many class="cn.hzhy.oa.entity.Role" column="ref_role_id"></many-to-many>
    </set>    
  </class>
</hibernate-mapping>